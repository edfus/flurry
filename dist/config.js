!function(){"use strict";function e(e,t,n,i,o,r,a){try{var s=e[r](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,o)}function t(t){return function(){var n=this,i=arguments;return new Promise((function(o,r){var a=t.apply(n,i);function s(t){e(a,o,r,s,l,"next",t)}function l(t){e(a,o,r,s,l,"throw",t)}s(void 0)}))}}function n(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function i(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}function o(e,t,n){if(e!==t)throw new TypeError("Private static access of wrong provenance");return n.get?n.get.call(e):n.value}function r(e,t,n,i){if(e!==t)throw new TypeError("Private static access of wrong provenance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var a,s=!!/test=1|debug/.test(location.search),l=!!/app=1/.test(location.search),c={fieldOfView:60,aspectRatio:window.innerWidth/window.innerHeight,nearPlane:1,farPlane:1e4},h=(a=t((function*(){var e,t,n=(e,t,i)=>()=>{(i.style.opacity=e)<0?(i.hidden=!0)&&(i.style.willChange="auto"):requestAnimationFrame(n(e-t,t,i))},i=document.getElementById("loading-section"),o=document.getElementById("loader");setTimeout((()=>{!0!==i.hidden&&(i.style.willChange="opacity",n(1,.008,i)()),!0!==o.hidden&&(o.style.willChange="opacity",n(1,.012,o)())}),null!==(e=null===(t=config)||void 0===t?void 0:t.loading_timeOut)&&void 0!==e?e:400)})),function(){return a.apply(this,arguments)});window.config={testMode:s,inApp:l,version:"1.2.4",cameraSetting:c,getContainer:()=>document.getElementById("main"),getUIContainer:()=>document.getElementById("ui"),getScoreContainer:()=>document.getElementById("score"),gameLoadedCallback:h,speed_score:150};{var d,u,p,g,m,v,w,f;window.Dialog=(u=new WeakMap,p=new WeakMap,g=new WeakMap,m=d=class e extends HTMLElement{constructor(){super(),u.set(this,{writable:!0,value:null}),p.set(this,{writable:!0,value:null}),g.set(this,{writable:!0,value:null}),i(this,u,document.createElement("H3")),n(this,u).part="title",i(this,p,document.createElement("ARTICLE")),n(this,p).part="paragraphs"}set title(e){n(this,u).textContent=e}set paragraphs(e){Array.isArray(e)||(e="string"==typeof e?[e]:e.length||e[Symbol.iterator]?Array.from(e):[e]),n(this,p).innerHTML=e.reduce(((e,t)=>e+'<p part="paragraph">'.concat(t,"</p>")),"")}get paragraphs(){return Array.from(n(this,p).children).map((e=>e.textContent)).join("\n")}show(){this.classList.add("dialog"),i(this,g,this.attachShadow({mode:"closed"})),this.append(n(this,u),n(this,p)),this.classList.add("active"),e.newEvent("dialogShow")}hide(){this.classList.add("hide"),e.newEvent("dialogHide"),this.addEventListener("animationend",(()=>{this.remove()}),{passive:!0,once:!0})}connectedCallback(){r(e,d,v,!0),e.newEvent("dialogAdd"),this.show()}disconnectedCallback(){r(e,d,v,!1),e.newEvent("dialogRemove")}append(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach((e=>n(this,g).append(e)))}newEvent(e){this.dispatchEvent(new CustomEvent(e))}addOnceListener(e,t){this.addEventListener(e,t,{passive:!0,once:!0})}static get isBusy(){return o(this,d,v)}static newEvent(e){o(this,d,w)[e]&&(o(this,d,w)[e]=o(this,d,w)[e].filter((e=>{var{callback:t,once:n}=e;return t.call(this),!n})))}static addOnceListener(e,t){e in o(this,d,w)||(o(this,d,w)[e]=new Array),o(this,d,w)[e].push({callback:t,once:!0})}static addEventListener(e,t){e in o(this,d,w)||(o(this,d,w)[e]=new Array),o(this,d,w)[e].push({callback:t,once:!1})}static removeEventListener(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=o(this,d,w)[e].length-1;i>=0;i--)t===o(this,d,w)[e][i].callback&&n===o(this,d,w)[e][i].once&&o(this,d,w)[e].splice(i,1)}static append(e){void 0===o(this,d,f)&&(r(this,d,f,[]),this.addEventListener("dialogRemove",(()=>{o(this,d,f).length&&document.body.append(o(this,d,f).shift())}))),this.isBusy?o(this,d,f).push(e):document.body.append(e)}},v={writable:!0,value:!1},w={writable:!0,value:{}},f={writable:!0,value:void 0},m);var y=new WeakMap,E=new WeakMap;class e extends Dialog{constructor(){super(),y.set(this,{writable:!0,value:null}),E.set(this,{writable:!0,value:null}),i(this,y,document.createElement("BUTTON")),n(this,y).part="confirm-button button",n(this,y).type="button",i(this,E,document.createElement("BUTTON")),n(this,E).part="reject-button button",n(this,E).type="button"}show(){super.show(),this.append(n(this,y),n(this,E)),n(this,y).addEventListener("click",(e=>{console.info("Confirm: "+n(this,y).innerText),this.newEvent("confirm"),this.hide()}),{passive:!0,once:!0}),n(this,E).addEventListener("click",(e=>{console.info("Confirm: rejected"),this.newEvent("reject"),this.hide()}),{passive:!0,once:!0})}set confirmText(e){n(this,y).textContent=e}set rejectText(e){n(this,E).textContent=e}}var b=new WeakMap,T=new WeakMap;class a extends Dialog{constructor(){super(),b.set(this,{writable:!0,value:null}),T.set(this,{writable:!0,value:-1}),i(this,b,document.createElement("BUTTON")),n(this,b).part="error-button button",n(this,b).innerText="OK",this.title="Oops, an error occurred."}show(){super.show(),this.append(n(this,b)),n(this,b).addEventListener("click",(e=>{this.hide()}),{passive:!0,once:!0}),n(this,T)>0&&setTimeout((()=>this.hide()),n(this,T))}set msToHide(e){i(this,T,e)}}window.customElements.define("confirm-dialog",e),window.customElements.define("error-dialog",a),Dialog.newConfirm=t((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Yes",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"cancel",o=document.createElement("confirm-dialog");return o.title=e,o.paragraphs=t,o.confirmText=n,o.rejectText=i,new Promise((e=>{o.addOnceListener("confirm",(()=>e(!0))),o.addOnceListener("reject",(()=>e(!1))),Dialog.append(o)}))})),Dialog.newError=function(){for(var e=document.createElement("error-dialog"),t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var{[n.length-1]:o,length:r}=n;"number"==typeof o?(e.msToHide=o,e.paragraphs=n.slice(0,r-1)):e.paragraphs=n,Dialog.append(e),console.warn.call(this,"NewError: ",e.paragraphs)},Dialog.addEventListener("dialogShow",(()=>{Array.from(document.querySelectorAll("button")).forEach((e=>e.setAttribute("tabindex","-1")))})),Dialog.addEventListener("dialogHide",(()=>{Array.from(document.querySelectorAll("button")).forEach((e=>e.removeAttribute("tabindex")))})),window.existsCookie=e=>document.cookie.includes(e),window.setCookie=(e,t)=>{var n=new Date;n.setTime(n.getTime()+864e5*Number(t)),"https:"!==location.protocol&&config.testMode?document.cookie="".concat(e,"; expires=").concat(n.toUTCString(),"; HostOnly=true; path=/; SameSite=Strict;"):document.cookie="".concat(e,"; expires=").concat(n.toUTCString(),"; HostOnly=true; Secure=true; path=/; SameSite=Strict;")},window.toggleFullScreen=e=>{document.fullscreenElement?document.exitFullscreen():e.requestFullscreen().catch((e=>{Dialog.newError("Error attempting to enable full-screen mode","".concat(e.message," (").concat(e.name,")"))}))},window.ThrottleLog=class{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;this.gap=e}log(){if(!this.inQueue){var e=Array.from(arguments).toString();e===this.prLog?this.silent||(console.log("%cSame as previous log, staying slient.","color: lightSkyBlue"),this.silent=!0):(console.log.apply(window,arguments),this.silent=!1,this.prLog=e),setTimeout((()=>{this.inQueue=!1}),this.gap),this.inQueue=!0}}autoLog(e){return this.timer=setInterval((()=>this.log(e())),this.gap+1),this}stopAutoLog(){return clearInterval(this.timer),this}}}}();