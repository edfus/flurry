!function(){"use strict";function e(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function t(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}function i(e,t,i){if(e!==t)throw new TypeError("Private static access of wrong provenance");return i.get?i.get.call(e):i.value}function n(e,t,i,n){if(e!==t)throw new TypeError("Private static access of wrong provenance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}{const e=4,t=!!/test=1|debug/.test(location.search),i=!!/app=1/.test(location.search),n="1.2.4",s={fieldOfView:60,aspectRatio:window.innerWidth/window.innerHeight,nearPlane:1,farPlane:1e4},o=()=>document.getElementById("main"),a=()=>document.getElementById("ui"),r=()=>document.getElementById("score"),l=async()=>{var t,i;const n=(e,t,i)=>()=>{(i.style.opacity=e)<0?(i.hidden=!0)&&(i.style.willChange="auto"):requestAnimationFrame(n(e-t,t,i))},s=document.getElementById("loading-section"),o=document.getElementById("loader");setTimeout((()=>{!0!==s.hidden&&(s.style.willChange="opacity",n(1,.002*e,s)()),!0!==o.hidden&&(o.style.willChange="opacity",n(1,.003*e,o)())}),null!==(t=null===(i=config)||void 0===i?void 0:i.loading_timeOut)&&void 0!==t?t:400)},c=150;window.config={testMode:t,inApp:i,version:n,cameraSetting:s,getContainer:o,getUIContainer:a,getScoreContainer:r,gameLoadedCallback:l,speed_score:c}}{var s,o,a,r,l,c,d,h;window.Dialog=(o=new WeakMap,a=new WeakMap,r=new WeakMap,l=s=class l extends HTMLElement{constructor(){super(),o.set(this,{writable:!0,value:null}),a.set(this,{writable:!0,value:null}),r.set(this,{writable:!0,value:null}),t(this,o,document.createElement("H3")),e(this,o).part="title",t(this,a,document.createElement("ARTICLE")),e(this,a).part="paragraphs"}set title(t){e(this,o).textContent=t}set paragraphs(t){Array.isArray(t)||(t="string"==typeof t?[t]:t.length||t[Symbol.iterator]?Array.from(t):[t]),e(this,a).innerHTML=t.reduce(((e,t)=>e+'<p part="paragraph">'.concat(t,"</p>")),"")}get paragraphs(){return Array.from(e(this,a).children).map((e=>e.textContent)).join("\n")}show(){this.classList.add("dialog"),t(this,r,this.attachShadow({mode:"closed"})),this.append(e(this,o),e(this,a)),this.classList.add("active"),l.newEvent("dialogShow")}hide(){this.classList.add("hide"),l.newEvent("dialogHide"),this.addEventListener("animationend",(()=>{this.remove()}),{passive:!0,once:!0})}connectedCallback(){n(l,s,c,!0),l.newEvent("dialogAdd"),this.show()}disconnectedCallback(){n(l,s,c,!1),l.newEvent("dialogRemove")}append(...t){t.forEach((t=>e(this,r).append(t)))}newEvent(e){this.dispatchEvent(new CustomEvent(e))}addOnceListener(e,t){this.addEventListener(e,t,{passive:!0,once:!0})}static get isBusy(){return i(this,s,c)}static newEvent(e){i(this,s,d)[e]&&(i(this,s,d)[e]=i(this,s,d)[e].filter((({callback:e,once:t})=>(e.call(this),!t))))}static addOnceListener(e,t){e in i(this,s,d)||(i(this,s,d)[e]=new Array),i(this,s,d)[e].push({callback:t,once:!0})}static addEventListener(e,t){e in i(this,s,d)||(i(this,s,d)[e]=new Array),i(this,s,d)[e].push({callback:t,once:!1})}static removeEventListener(e,t,n=!1){for(let o=i(this,s,d)[e].length-1;o>=0;o--)t===i(this,s,d)[e][o].callback&&n===i(this,s,d)[e][o].once&&i(this,s,d)[e].splice(o,1)}static append(e){void 0===i(this,s,h)&&(n(this,s,h,[]),this.addEventListener("dialogRemove",(()=>{i(this,s,h).length&&document.body.append(i(this,s,h).shift())}))),this.isBusy?i(this,s,h).push(e):document.body.append(e)}},c={writable:!0,value:!1},d={writable:!0,value:{}},h={writable:!0,value:void 0},l);var u=new WeakMap,p=new WeakMap;class w extends Dialog{constructor(){super(),u.set(this,{writable:!0,value:null}),p.set(this,{writable:!0,value:null}),t(this,u,document.createElement("BUTTON")),e(this,u).part="confirm-button button",e(this,u).type="button",t(this,p,document.createElement("BUTTON")),e(this,p).part="reject-button button",e(this,p).type="button"}show(){super.show(),this.append(e(this,u),e(this,p)),e(this,u).addEventListener("click",(t=>{console.info("Confirm: "+e(this,u).innerText),this.newEvent("confirm"),this.hide()}),{passive:!0,once:!0}),e(this,p).addEventListener("click",(e=>{console.info("Confirm: rejected"),this.newEvent("reject"),this.hide()}),{passive:!0,once:!0})}set confirmText(t){e(this,u).textContent=t}set rejectText(t){e(this,p).textContent=t}}var m=new WeakMap,g=new WeakMap;class v extends Dialog{constructor(){super(),m.set(this,{writable:!0,value:null}),g.set(this,{writable:!0,value:-1}),t(this,m,document.createElement("BUTTON")),e(this,m).part="error-button button",e(this,m).innerText="OK",this.title="Oops, an error occurred."}show(){super.show(),this.append(e(this,m)),e(this,m).addEventListener("click",(e=>{this.hide()}),{passive:!0,once:!0}),e(this,g)>0&&setTimeout((()=>this.hide()),e(this,g))}set msToHide(e){t(this,g,e)}}window.customElements.define("confirm-dialog",w),window.customElements.define("error-dialog",v),Dialog.newConfirm=async function(e="",t=[""],i="Yes",n="cancel"){let s=document.createElement("confirm-dialog");return s.title=e,s.paragraphs=t,s.confirmText=i,s.rejectText=n,new Promise((e=>{s.addOnceListener("confirm",(()=>e(!0))),s.addOnceListener("reject",(()=>e(!1))),Dialog.append(s)}))},Dialog.newError=function(...e){let t=document.createElement("error-dialog");const{[e.length-1]:i,length:n}=e;"number"==typeof i?(t.msToHide=i,t.paragraphs=e.slice(0,n-1)):t.paragraphs=e,Dialog.append(t),console.warn.call(this,"NewError: ",t.paragraphs)},Dialog.addEventListener("dialogShow",(()=>{Array.from(document.querySelectorAll("button")).forEach((e=>e.setAttribute("tabindex","-1")))})),Dialog.addEventListener("dialogHide",(()=>{Array.from(document.querySelectorAll("button")).forEach((e=>e.removeAttribute("tabindex")))})),window.existsCookie=e=>document.cookie.includes(e),window.setCookie=(e,t)=>{const i=new Date;i.setTime(i.getTime()+864e5*Number(t)),"https:"!==location.protocol&&config.testMode?document.cookie="".concat(e,"; expires=").concat(i.toUTCString(),"; HostOnly=true; path=/; SameSite=Strict;"):document.cookie="".concat(e,"; expires=").concat(i.toUTCString(),"; HostOnly=true; Secure=true; path=/; SameSite=Strict;")},window.toggleFullScreen=e=>{document.fullscreenElement?document.exitFullscreen():e.requestFullscreen().catch((e=>{Dialog.newError("Error attempting to enable full-screen mode","".concat(e.message," (").concat(e.name,")"))}))},window.ThrottleLog=class{constructor(e=2e3){this.gap=e}log(){if(!this.inQueue){const e=Array.from(arguments).toString();e===this.prLog?this.silent||(console.log("%cSame as previous log, staying slient.","color: lightSkyBlue"),this.silent=!0):(console.log.apply(window,arguments),this.silent=!1,this.prLog=e),setTimeout((()=>{this.inQueue=!1}),this.gap),this.inQueue=!0}}autoLog(e){return this.timer=setInterval((()=>this.log(e())),this.gap+1),this}stopAutoLog(){return clearInterval(this.timer),this}}}}();