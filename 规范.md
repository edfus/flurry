## 代码编写
### 风格
- 能用=== | !==的地方就不要用== !=。有错改就是。
- `*`  `+`  `-` 等运算符两旁要加空格
- 对象属性赋值的`:`号后面要加空格
- 用类似
  BoxGeometry(width, height, depth, widthSegments = 1, heightSegments = 1, depthSegments = 1)
  的方式表示某个值默认为xx
- 若用return值，请标识其用途意义。
- 命名使用驼峰命名法，在标识一些特殊状态如最大最小时用下划线_增加辨识度。如 min_fuckMyLife
- 对已解决的问题，相关api的使用等进行注释的方式如下：
```js
/*
  * HemisphereLight(天空颜色, 光的接地颜色, 光强度 = 1)：
        半球光，在空中创造一个球形光源，无法投射阴影，可反光
  * AmbientLight(光色, 光强度 = 1)：
        环境光，没有方向，照亮场景中的所有对象，不能投射阴影或反光
  * DirectionalLight(光色, 光强度 = 1)：
        定向光，射向目标物体或位置的平行光
*/
```
### document this

https://marketplace.visualstudio.com/items?itemName=oouo-diogo-perdigao.docthis

将光标停留在在写好的函数内，使用快捷键或右键->Document this，即可生成注释模板。

- @param {变量类型} 变量名 相关注释
- @return {返回值类型} 相关注释

生成后在当鼠标悬停在这个函数及使用这个函数的任何地方时，都可以看到其的相关信息。

示例：
```js
/**
 * Adjust the collision box.
 * @param {CollisionBox} box The original box.
 * @param {CollisionBox} adjustment Adjustment box.
 * @return {CollisionBox} The adjusted collision box object.
 */
function createAdjustedCollisionBox(box, adjustment) {
  return new CollisionBox(
      box.x + adjustment.x,
      box.y + adjustment.y,
      box.width,
      box.height);
} // 对于返回 void 的方法和构造函数，请忽略 @return
```

注意：
- @param 后面的相关注释并非必须，甚至最好不写（当看变量名即可方便理解意思时。）
- 也不是每个函数都需要写这些注释。谨防脱裤子放屁。

### Todo tree
- //BUG: 在console中抛出的error，可能的程序逻辑漏洞
- //FIX: 在console中抛出的warn，用户体验不佳之处，代码质量不佳之处，逻辑混乱之处。不会对项目有根本上的破坏的
- //TODO: 待添加的功能，待完成的代码，告诉他人此处代码未完全完成或何处有待修改
- //CHORE: 单纯重复性的劳作。对项目*无根本上的*改变。
- //NOTE: 任何你想告诉其他人，或者单纯做个记录的东西。

### 错误信息输出与调试
- console.error() 输出错误信息
- console.warn() 输出警告信息
- console.info() 输出告诉用户的信息
- console.log() 用于调试的信息（与console.info无样式上的区别，单纯只是语义的不同）
- console.dir() 折叠式输出数组/对象（打印数组/对象请用这个。）

当发生了需要告诉用户的错误时，请使用Dialog.newError()函数（在`config.js`中定义）

### 变量声明

- **准则：能用const的地方就不要用let，能用let的地方就不要用var。const > let > var**
- **尽量少给同一个变量赋予不同类型的值。**

- const、let声明的变量的作用范围为{}大括号内。为了防止变量的全局污染（与其他人的变量命名冲突），可在外面用一个大括号将里面的东西括住。
  如：
```js
{ //防止在其他文件中也能访问到func / abc。（web JS中的各个script文件共享一个window作用域）
  const func = e => {};
  let abc = 1;
}
```
- 另外，var声明的变量也可以用立即调用函数的方式防止全局污染，但最好不要这么做。我们将var声明的变量默认为全局变量。（非函数内的）
- 另外的另外，JS的一些异步操作函数中用var而非let会导致一些奇奇怪怪的错误。这个不要求掌握。

- const
  - 函数变量请用const声明
  - 配置类的暂时存在的变量也请用const声明
  - JS中的对象变量是引用类型，因此可以在用const声明变量后修改其内部属性。const obj = {}; obj.aaa = 'aaa'; 但为了方便辨识，这种会在其后修改值的变量都不用const声明。不过在很多情况下，const声明的变量是作为three.js新建对象配置而存在，因此作为配置的对象声明也可以用const
    如：  
```js
const geometry = new THREE.CylinderGeometry(600, 600, 800, 40, 10);
      geometry.applyMatrix(new THREE.Matrix4().makeRotationX(-Math.PI / 2));
      this.mesh = new THREE.Mesh(geometry, material);
```
- var
  - var的作用范围是一个函数内的所有地方。在这个项目中我们不妨在只用要使用全局变量时才使用var（用var表示这个变量在该文件的各个地方都能访问到）
- let
  - 其他情况都用let

## 代码提交

github的markdown风格中，可以用两个`:`配上中间的emoji名的形式表示emoji
因为emoji具有易辨识的特点，因此我们在项目的commit message中约定俗称一些emoji。
可以在github网页端上查看这些emoji语句的效果。
- :checkered_flag: - checkered_flag 阶段性成果，通常搭配#号。放在末尾。
  如：#3 scene、camera搭建完成:checkered_flag:
- :bug: - bug 发现BUG。配合代码中的`//BUG: `表示具体地点。其后无需空格。
  如：:bug:Airplane对象的constructor可能导致内存泄漏
- :green_heart: - green_heart 修复BUG、FIX等。其后无需空格。
  如：:green_heart修复:Airplane对象的constructor可能的内存泄漏
  或将:bug:和:green_heart:连起来使用，表示发现+修复：:green_heart:-:bug:修复:Airplane对象的constructor可能的内存泄漏
- :sparkles: - sparkles 当添加了新的功能时。其使用不必局限，可尽量宽泛。其后无需空格。
  如：:sparkles:添加规范.md
- :zap: - zap 当对先用代码/组织结构进行了优化时。其后无需空格。
  如：:zap:改用ES6 class
- :construction: - construction 表示当前提交的代码尚未完成，仍需修改。其后无需空格。
- :lipstick: - lipstick 在显示样式方面的优化。
- https://gist.github.com/rxaviers/7360908 Complete list of github markdown emoji markup

另外，当提交的修改无关紧要时，请在开头添加MINOR（其后要空格）
如：MINOR rename.


### github desktop stash

-- 当目前所做修改不足以构成一次commit时，又要pull远程库时的一个解决方法。

*stash: to store or hide something, especially a large amount*

方法一：于github desktop中

1. 创建一个新分支(branch)或切换到一个新分支
2. github destkop will ask you to leave your changes in current branch or bring them to a new one
3. 选择Leave changes in current branch，即把此时本地所做更改暂存到stash中
5. git pull拉取远程库不会有冲突。
6. git pull之后打开stash，选择restore，即把stash区中的暂存物pop出
7. 此时可能出现conflict，解决即可。

方法二：于VS code中

1. 点击侧边栏(Activity Bar)中的git图标
2. 将你想保存的changes stage.（点击每个文件的`+`符号，使其出现在staged changes中）
3. 点击上方的`...`
4. 找到Stash选项，展开并点击Stash（于Stash(untracked)上方）。message为可选，按下enter即可
5. changes即被归于stash区中
6. fetch / pull 远程库
7. 同样找到Stash选项，展开并点击Pop Stash，选择某个stash的版本即可
8. 解决可能的conflict
